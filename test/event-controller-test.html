<!doctype html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
        <title>akyral-modal</title>

        <script src="../../webcomponentsjs/webcomponents.js"></script>
        <script src="../../web-component-tester/browser.js"></script>
        <script src="../../sinon/index.js"></script>

        <link rel="import" href="../akyral-modal.html">
    </head>

    <body>

      <dom-module id="some-element">
        <template>
          some element
          <akyral-modal id="modal" on-modal-show="doSomething">
              test
          </akyral-modal>
        </template>
        <script>
          Polymer({

            is:'some-element',

            doSomething: function(){}
          });
        </script>
      </dom-module>

      <some-element></some-element>

      <script>
          var someEl = document.querySelector('some-element');
          var someElWithController = document.querySelector('some-element[hascontroller]');

          describe('<akyral-modal>', function() {
            describe('when eventController is set', function() {
              it('should execute the controllers events', function(done) {
                var spy = sinon.spy(someEl, 'doSomething');
                someEl.$.modal.show();

                setTimeout(function(){
                  assert.isTrue(spy.called);
                  done();
                }, 350);
              });
            });
          });
      </script>
    </body>
</html>
